<p align='center'>
    <img src="https://capsule-render.vercel.app/api?type=soft&color=ff4500&height=200&section=header&text=Welcome%20to%20LOGEAT%20ğŸ‘‹&fontSize=50&animation=fadeIn&fontColor=ffffff"/>
</p>

<p align='center'>
  <a>
    <img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white"/>
  </a>
  <a>
    <img src="https://img.shields.io/badge/GitHub%20Actions-2088FF?style=for-the-badge&logo=github-actions&logoColor=white"/>
  </a>
    <a>
        <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white"/>
    </a>
   
  <a>
    <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"/>
  </a>

<br>
    
  <a>
    <img src="https://img.shields.io/badge/Docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white"/>
  </a>
  <a>
    <img src="https://img.shields.io/badge/Redis-%23DD0031.svg?&style=for-the-badge&logo=redis&logoColor=white"/>
  </a>
  <a>
    <img src="https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white"/>
  </a>
  <a>
    <img src="https://img.shields.io/badge/Amazon_AWS-232F3E?style=for-the-badge&logo=amazon-aws&logoColor=white"/>
  </a>
  <a>
    <img src="https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white"/>
  </a>

<br>
	
    
</p>



<p align='center'>
  <b>Team: LOGEAT<b>
  <br>
    ğŸ‘¨â€ğŸ’» ê¹€ì˜ê´‘, ê¹€ì¢…ì›, ì¥ì€ì§€, ë°•ì„±ì¤€, ì´ì¢…í‘œ 
</p>

## ëª©ì°¨
- [ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ](#ì„¤ê³„ì„œ)
- [ì•„í‚¤í…ì²˜ ìƒì„¸ ë¬¸ì„œ](#ìƒì„¸ë¬¸ì„œ)
- [êµ¬ì„±ìŠ¤í¬ë¦½íŠ¸](#êµ¬ì„±ìŠ¤í¬ë¦½íŠ¸)
- [í…ŒìŠ¤íŠ¸ ê²°ê³¼](#í…ŒìŠ¤íŠ¸-ê²°ê³¼)

---

## ì„¤ê³„ì„œ

![ì•„í‚¤í…ì²˜](https://github.com/beyond-sw-camp/be03-4th-2team-logeat-backend/assets/97268373/137d4c71-386d-4d60-bfb8-5c3bf37c79a8)


## ìƒì„¸ë¬¸ì„œ
 - ì‚¬ìš©ìê°€ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ www.logeat.shop ì£¼ì†Œë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
    
  - ì‚¬ìš©ìì˜ ìš”ì²­ì€ DNS ì„œë²„ë¥¼ í†µí•´ www.logeat.shop ì˜ IP ì£¼ì†Œë¡œ í•´ì„ë©ë‹ˆë‹¤.
    
  - í•´ì„ëœ IP ì£¼ì†ŒëŠ” Amazon CloudFrontë¡œ ì—°ê²°ë©ë‹ˆë‹¤. CloudFrontëŠ” ì‚¬ìš©ìì—ê²Œ ë” ë¹ ë¥¸ ì½˜í…ì¸  ì „ì†¡ì„ ìœ„í•´ ìºì‹±ëœ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
    
  - CloudFrontëŠ” ìš”ì²­ì„ Amazon S3 ë²„í‚·ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. S3ëŠ” ì •ì  ì›¹ ì½˜í…ì¸  í˜¸ìŠ¤íŒ…ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
    
  - ë¸Œë¼ìš°ì €ì—ì„œì˜ APIìš”ì²­ ì´í›„ AWSì˜ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ ê±°ì³ Nginxë¡œ ì´ë™í•©ë‹ˆë‹¤.
    
  - NginxëŠ” ë¡œë“œ ë°¸ëŸ°ì‹± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ NginxëŠ” ë¸”ë£¨-ê·¸ë¦° ë°°í¬ ë°©ì‹ì„ ì´ìš©í•˜ì—¬, ìš”ì²­ì„ í˜„ì¬ í™œì„±í™”ëœ(EC2 ì¸ìŠ¤í„´ìŠ¤ ë‚´ì— ìˆëŠ”) Docker ì»¨í…Œì´ë„ˆ ê·¸ë£¹(ë¸”ë£¨ ë˜ëŠ” ê·¸ë¦°)ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.
    
  - í•´ë‹¹ Docker ì»¨í…Œì´ë„ˆë“¤ì€ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³  ìˆìœ¼ë©°, ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    
  - Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì€ API ìš”ì²­ ì²˜ë¦¬ë¥¼ ìœ„í•´ Amazon RDSì™€ Redisì™€ ê°™ì€ ë°ì´í„° ìŠ¤í† ë¦¬ì§€ ë° ìºì‹± ì„œë¹„ìŠ¤ì™€ í†µì‹ í•©ë‹ˆë‹¤.
    
  - API ì²˜ë¦¬ê°€ ì™„ë£Œëœ í›„, ì‘ë‹µì€ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤.
    
- ë¸”ë£¨-ê·¸ë¦° ë°°í¬
  
  - ë¸”ë£¨/ê·¸ë¦° ë°°í¬ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¬´ì¤‘ë‹¨ ë°°í¬ ë°©ì‹ ì¤‘ í•˜ë‚˜ë¡œ, ìƒˆë¡œìš´ ë²„ì „ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê¸°ì¡´ ë²„ì „ê³¼ ì™„ì „íˆ ë¶„ë¦¬ëœ í™˜ê²½(ê·¸ë¦°)ì— ë°°í¬í•œ ë‹¤ìŒ, ëª¨ë“  ê²ƒì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•œ í›„ì— íŠ¸ë˜í”½ì„ ìƒˆë¡œìš´ í™˜ê²½ìœ¼ë¡œ ì „í™˜í•¨ìœ¼ë¡œì¨ ì‚¬ìš©ìì—ê²Œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ì´ ì—…ë°ì´íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

## êµ¬ì„±ìŠ¤í¬ë¦½íŠ¸

<details>
<summary><b>logeat.yml</b></summary>
<div markdown="1">
	
```yaml
name: Deploy to Ec2 With Docker Blue/Green
on:
  push:
    branches:
      - master
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Set YML
        run: |
          mkdir -p src/main/resources
          echo "${{ secrets.APPLICATION_YML }}" | base64 --decode > src/main/resources/application.yml
          find src
          echo "${{ secrets.JWT_YML }}" | base64 --decode > src/main/resources/jwt.yml
          find src
      
      - name: Build with Gradle  
        working-directory: ./  
        run: |  
          chmod +x ./gradlew  
          ./gradlew bootJar 

      - name: Build Docker image
        working-directory: ./
        run: |
          docker build -t ticketpaper2/logeat-backend:blue -f Dockerfile .
          docker build -t ticketpaper2/logeat-backend:green -f Dockerfile .
      
      - name: DockerHub Login
        uses: docker/login-action@v1
        with:
          username: ${{ secrets.DOCKER_NAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Push Docker Images to DockerHub
        run: |
          docker push ticketpaper2/logeat-backend:blue
          docker push ticketpaper2/logeat-backend:green
      - name: EC2 SSH Login and Docker run with Blue/Green Deployment
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.EC2_HOST }}
          username: ${{ secrets.EC2_USERNAME }}
          key: ${{ secrets.EC2_SSH_KEY }}
          script: |
            ./deploy.sh
            
            echo "Deployed $NEW_VERSION version"
            # ì´ì „ ë²„ì „ì˜ ì´ë¯¸ì§€ ì‚­ì œ ë˜ëŠ” ë³´ê´€ ë¡œì§ ì¶”ê°€ (ì„ íƒì )
```
 </div>

</details>
<details>
<summary><b>Dockerfile</b></summary>
<div markdown="1">
	
```Dockerfile
FROM openjdk:11 as stage1
WORKDIR /app
COPY gradlew .
COPY gradle gradle
COPY build.gradle .
COPY settings.gradle .
COPY src src
RUN chmod +x ./gradlew
RUN ./gradlew bootJar
FROM openjdk:11
WORKDIR /app
COPY --from=stage1 /app/build/libs/*.jar app.jar
ENTRYPOINT ["java", "-Duser.timezone=Asia/Seoul", "-jar", "app.jar"]
```
 </div>

</details>


## í…ŒìŠ¤íŠ¸ ê²°ê³¼
<details> <summary><b>ê²°ê³¼</b></summary>   
  <div markdown="1"> 
  </div>
</details>



